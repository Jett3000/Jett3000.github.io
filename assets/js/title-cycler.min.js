var mgr,fontAzoSansItalic,sceneLength=7200,frameCountdown=0,sceneNames=[CoverSketch,JellygonSketch,RecursiveSketch,SpinnerSketch],sceneBank=[],pentaPoints=[];class HollowPentagon{constructor(t=.08){let e=.45*min(width,height),n=e*t;this.shapePoints=[],this.contourPoints=[];let o=createVector(0,0);for(let t=0;t<5;t++){let r=p5.Vector.fromAngle(t*TWO_PI/5-HALF_PI);this.shapePoints.push(p5.Vector.add(o,p5.Vector.mult(r,e))),this.contourPoints.push(p5.Vector.add(o,p5.Vector.mult(r,e-n)))}this.contourPoints.reverse()}show(){for(var t of(beginShape(),this.shapePoints))vertex(t.x,t.y);for(var t of(beginContour(),this.contourPoints))vertex(t.x,t.y);endContour(),endShape()}}class TranslucentPentagon{constructor(){this.regen()}regen(){this.fillColor=random(["#bc9eca88","#752c7c88","#b5339188"]),this.theta=random(TWO_PI),this.spinning=random()<.8;let t=TWO_PI/360;this.angularVel=random(t/2,2*t),random()<.5&&(this.angularVel*=-1),this.pos=createVector(random(width),random(height)),this.rad=random(60,100)}show(){push(),fill(this.fillColor),translate(this.pos.x,this.pos.y),rotate(this.theta),scale(this.rad),beginShape();for(let t of pentaPoints)vertex(t.x,t.y);endShape(),this.theta=this.spinning?this.theta+this.angularVel:this.theta,pop()}}class PentaPrism{constructor(){this.prismCenter1=createVector(.25*width,.66*height),this.prismCenter2=createVector(.75*width,.33*height),this.frontPoints=[],this.backPoints=[];let t=random(TWO_PI/10);for(let e=0;e<5;e++){let n=p5.Vector.fromAngle(t+e*TWO_PI/5).mult(random(width/5,width/3));this.frontPoints.push(p5.Vector.add(this.prismCenter1,n))}t=random(TWO_PI/10);for(let e=0;e<5;e++){let n=p5.Vector.fromAngle(t+e*TWO_PI/5).mult(random(width/5,width/3));this.backPoints.push(p5.Vector.add(this.prismCenter2,n))}this.nd={dp:.3,df:random(.002,.006)}}show(t=5){let e=[];for(let t=1;t<=4;t++)e.push(noise(frameCount*this.nd.df+this.nd.dp*t));for(let n=0;n<t;n++){let t=this.frontPoints[n].copy(),o=this.frontPoints[(n+1)%5].copy(),r=this.backPoints[n].copy(),i=this.backPoints[(n+1)%5].copy();t.lerp(this.prismCenter1,e[3]),o.lerp(this.prismCenter1,e[2]),r.lerp(this.prismCenter2,e[1]),i.lerp(this.prismCenter2,e[0]),beginShape(),vertex(r.x,r.y),vertex(t.x,t.y),vertex(o.x,o.y),vertex(i.x,i.y),endShape(CLOSE)}}}function populateSceneBank(){for(let t of sceneNames)sceneBank.push(t);shuffle(sceneBank,!0)}function preload(){fontAzoSansItalic=loadFont("https://use.typekit.net/af/90ca1f/000000000000000000013f4f/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3")}function setup(){createCanvas(window.innerWidth,window.innerHeight).parent(document.getElementById("sketch-container")),fill("#DA48975A"),frameRate(60),textAlign(CENTER,CENTER),textSize(height/4.5),textFont(fontAzoSansItalic);for(let t=0;t<5;t++){let e=p5.Vector.fromAngle(t*TWO_PI/5-HALF_PI);pentaPoints.push(e.copy())}mgr=new SceneManager,populateSceneBank()}function draw(){0==frameCountdown?(frameCountdown=sceneLength,0==sceneBank.length&&populateSceneBank(),mgr.showScene(sceneBank.pop())):frameCountdown--,mgr.draw()}function JellygonSketch(){var t=new HollowPentagon,e=.001,n=.33,o=.001;this.enter=function(){fill("#DA48977A"),stroke(100),strokeWeight(2)},this.draw=function(){blendMode(BLEND),background("#000000"),push(),fill("#fcfaee"),noStroke(),text("PROTOTYPE",width/2,height/2),pop(),blendMode(ADD),translate(0,height/2),translate(width/4,0);for(let o=0;o<1;o+=.05)push(),scale(o*o),rotate(4*TWO_PI*noise(o*n+frameCount*e)),t.show(),pop();let r=300*noise(frameCount*o);translate(width/2,0);for(let o=0;o<1;o+=.05)push(),scale(o*o),rotate(-4*TWO_PI*noise(o*n+(frameCount+r)*e)),t.show(),pop()}}function CoverSketch(){var t=new PentaPrism,e=1,n=!0;this.enter=function(){t=new PentaPrism},this.enter=function(){fill("#DA48977A"),stroke(100),strokeWeight(2)},this.draw=function(){blendMode(BLEND),background("#000000"),push(),fill("#fcfaee"),noStroke(),text("PROTOTYPE",width/2,height/2),pop(),blendMode(ADD),frameCount%120==0&&(1!=(e+=n?1:-1)&&6!=e||(n=!n)),t.show(constrain(e,1,5))}}function SpinnerSketch(){let t=[];this.setup=function(){for(let e=0;e<120;e++)t.push(new TranslucentPentagon)},this.enter=function(){noStroke();for(let e of t)e.regen()},this.draw=function(){blendMode(BLEND),background("#000000"),push(),fill("#fcfaee"),noStroke(),text("PROTOTYPE",width/2,height/2),pop(),blendMode(ADD);for(let e of t)e.show()}}function RecursiveSketch(){var t=[],e=0,n=0;this.enter=function(){n=0,e=0,noStroke(),fill("#da4897a0")},this.setup=function(){for(let e of pentaPoints)t.push(e.copy().mult(.85));t.reverse()},this.draw=function(){blendMode(BLEND),background("#000000"),push(),fill("#fcfaee"),noStroke(),text("PROTOTYPE",width/2,height/2),pop(),blendMode(ADD),translate(width/2,height/2),this.drawPentagon(height/4,e+1),600==n?(e=(e+1)%4,n=0):n++},this.drawPentagon=function(e,n){if(rotate(millis()/2e3),n>0)for(var o of pentaPoints)push(),translate(o.x*e,o.y*e),this.drawPentagon(.5*e,n-1),pop();for(var o of(push(),scale(e),beginShape(),pentaPoints))vertex(o.x,o.y);for(var o of(beginContour(),t))vertex(o.x,o.y);endContour(),endShape(),pop()}}