var mgr,fontAzoSansItalic,pbgLogo,durmpacLogo,sceneLength=7200,frameCountdown=0,sceneNames=[SpiralSketch,RainingSketch,MorphingSketch,LogoSketch],sceneBank=[],pentaPoints=[],colorBank=["#bc9eca50","#752c7c50","#b5339150"];class MorphingPentagon{constructor(){this.currPoints=this.randomPentagon(),this.nextPoints=this.randomPentagon(),this.currColor=color(random(colorBank)),this.nextColor=color(random(colorBank)),this.framesToMorph=120+random(40),this.framesToPause=70-random(60),this.frameCounter=0}show(){if(this.frameCounter<this.framesToMorph){let t=this.frameCounter/this.framesToMorph;t*=t,fill(lerpColor(this.currColor,this.nextColor,t)),beginShape();for(let e=0;e<5;e++){let o=p5.Vector.lerp(this.currPoints[e],this.nextPoints[e],t);vertex(o.x,o.y)}endShape()}else{fill(this.nextColor),beginShape();for(let t of this.nextPoints)vertex(t.x,t.y);endShape()}if(this.frameCounter-this.framesToMorph>this.framesToPause)return this.currPoints=this.nextPoints,this.nextPoints=this.randomPentagon(),this.currColor=this.nextColor,this.nextColor=color(random(colorBank)),void(this.frameCounter=0);this.frameCounter++}randomPentagon(){let t=width/10,e=height/10,o=createVector(random(t,width-t),random(e,height-e)),n=random(60,t),i=random(TWO_PI),r=[];for(let t of pentaPoints){let e=t.copy().rotate(i).mult(n).add(o);r.push(e)}return r}}class RainingPentagon{constructor(t=!1){this.inverter=t?-1:1,this.regen(),this.pos.y=-1==this.inverter?height+random(height):-random(height)}regen(){let t=1==this.inverter?0:height;this.pos=createVector(random(width),t),this.vel=createVector(0,random(1,2)*this.inverter),this.rotation=random(TWO_PI),this.rad=random(15,35)}show(){push(),translate(this.pos.x,this.pos.y),scale(this.rad),rotate(this.rotation),beginShape();for(let t of pentaPoints)vertex(t.x,t.y);endShape(),pop(),this.pos.add(this.vel),1==this.inverter?this.pos.y>height&&this.regen():this.pos.y<0&&this.regen()}}class FlyingLogo{constructor(t){this.image=t,this.pos=createVector(random(width),random(height)),this.vel=p5.Vector.random2D().mult(random(2,4)),this.scale=random(1,2)}show(){push(),translate(this.pos.x,this.pos.y),scale(this.scale),image(this.image,0,0),pop(),this.pos.add(this.vel),(this.pos.x<=this.image.width/2||this.pos.x>=width-this.image.width/2)&&(this.vel.x*=-1),(this.pos.y<=this.image.height/2||this.pos.y>=height-this.image.height/2)&&(this.vel.y*=-1)}}function populateSceneBank(){for(let t of sceneNames)sceneBank.push(t);shuffle(sceneBank,!0)}function preload(){fontAzoSansItalic=loadFont("https://use.typekit.net/af/90ca1f/000000000000000000013f4f/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3"),pbgLogo=loadImage("assets/img/pbg-logo.png"),durmpacLogo=loadImage("assets/img/durmpac-logo.png")}function setup(){createCanvas(window.innerWidth,window.innerHeight).parent(document.getElementById("sketch-container")),fill("#DA48975A"),noStroke(),frameRate(60),imageMode(CENTER),textAlign(CENTER,CENTER),textSize(height/4.5),textFont(fontAzoSansItalic);for(let t=0;t<5;t++){let e=p5.Vector.fromAngle(t*TWO_PI/5-HALF_PI);pentaPoints.push(e.copy())}ratio=.2*height/pbgLogo.height,pbgLogo.resize(pbgLogo.height*ratio,0),ratio=.2*height/durmpacLogo.height,durmpacLogo.resize(durmpacLogo.height*ratio,0),mgr=new SceneManager,populateSceneBank()}function draw(){0==frameCountdown?(frameCountdown=sceneLength,0==sceneBank.length&&populateSceneBank(),mgr.showScene(sceneBank.pop())):frameCountdown--,mgr.draw()}function MorphingSketch(){var t=[];this.enter=function(){let e=random(80,160);t=[];for(let o=0;o<e;o++)t.push(new MorphingPentagon)},this.draw=function(){blendMode(BLEND),background("#000000"),blendMode(ADD);for(let e of t)e.show()}}function RainingSketch(){var t=[],e=1e3;this.enter=function(){fill("#DA48979A"),t=[];let o=random();if(o<.33)for(let o=0;o<e;o++)t.push(new RainingPentagon(!1));else if(o<.66)for(let o=0;o<e;o++)t.push(new RainingPentagon(!0));else for(let o=0;o<e;o++)t.push(new RainingPentagon(random()<.5))},this.draw=function(){blendMode(BLEND),background("#000000"),blendMode(ADD);for(let e of t)e.show()}}function SpiralSketch(){this.enter=function(){fill("#DA48977A")},this.draw=function(){blendMode(BLEND),background("#000000"),blendMode(ADD),translate(width/2,height/2),rotate(millis()/1e4);frameCount,TWO_PI,TWO_PI;for(let t=0;t<6*TWO_PI;t+=TWO_PI/36){let e=8*pow(1.15,t),o=e*cos(t),n=e*sin(t);push(),translate(o,n);max(noise(e/100,frameCount/300),.5);scale(e/2*noise(e/100,frameCount/300)),beginShape();for(let t of pentaPoints)vertex(t.x,t.y);endShape(),pop()}}}function LogoSketch(){var t=[];this.setup=function(){for(let e=0;e<20;e++){let o=e%2==0?durmpacLogo:pbgLogo;t.push(new FlyingLogo(o))}},this.enter=function(){fill("#fcfaee")},this.draw=function(){blendMode(BLEND),background("#000000");let e="thanks for";text(e,width/2,height/2-textSize()/2),e="coming!",text(e,width/2,height/2+textSize()/2);for(let e of t)e.show()}}