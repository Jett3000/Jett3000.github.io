var numCurves=8,numSegs=3,offsetMag=30,startCol=null,endCol=null,colCounter=0,rainbowMode=!1,h=0,hOff=0,nd={x:.3,y:.3,fr:.002},curves=[],colorPairs=[[[199,92,88],[170,184,201]],[[86,216,214],[255,125,173]],[[206,17,136],[57,208,132]],[[31,145,211],[140,206,97]],[[214,78,204],[57,22,143]],[[44,44,71],[245,179,170]],[[191,51,57],[108,186,191]],[[107,170,197],[29,24,50]],[[68,3,0],[230,20,169]],[[109,137,214],[89,248,144]],[[31,95,135],[45,25,80]],[[51,101,85],[158,165,185]],[[228,79,63],[233,237,166]],[[166,128,73],[3,73,113]],[[10,21,78],[234,84,3]],[[53,103,110],[67,242,161]],[[11,187,129],[11,107,190]],[[153,62,155],[225,237,187]],[[202,108,211],[85,7,225]],[[91,99,110],[229,73,100]],[[16,8,63],[29,115,242]],[[44,64,175],[20,139,153]],[[51,81,133],[157,225,198]],[[121,109,152],[239,212,218]]],sketchNode=document.getElementById("wavy-background-container"),msgNode=document.getElementById("code-p");function setup(){if(createCanvas(window.innerWidth,window.innerHeight).parent(sketchNode),offsetMag=min(window.innerHeight/numCurves,.4*window.innerWidth/numSegs),rainbowMode)colorMode(HSB,360,255,255);else{let e=random(colorPairs);startCol=color(e[0][0],e[0][1],e[0][2]),endCol=color(e[1][0],e[1][1],e[1][2])}noStroke(),frameRate(60)}function draw(){for(rainbowMode?(background(h,140,180),h=(h+=1)>360?0:h,hOff=0):(background(startCol),colCounter=0),curves=[],i=-1;i<numCurves;i++){var e=height-(i+.5)*height/numCurves;for(beginShape(),curveVertex(width,0),curveVertex(width,0),j=-1;j<=numSegs;j++){var r=width-(j+.5)*width/numSegs;let n=createVector(r,e),o=noise(frameCount*nd.fr+j*nd.x,frameCount*nd.fr+i*nd.y)*TWO_PI,t=p5.Vector.fromAngle(o).mult(offsetMag);n.add(t),curveVertex(n.x,n.y)}curveVertex(0,0),curveVertex(0,0),rainbowMode?fill((h+hOff)%360,140,180):(fill(lerpColor(startCol,endCol,colCounter/numCurves)),colCounter++),endShape(),hOff+=360/numCurves}}function showPoints(){fill(0);for(let e of curves)for(let r=0;r<e.length;r++)ellipse(e[r].x,e[r].y,20)}function genCurves(){for(curves=[],i=-1;i<numCurves;i++){var e=[],r=height-(i+.5)*height/numCurves,n=min(height/numCurves,.4*width/numSegs);height,width;for(j=-1;j<=numSegs;j++){var o=width-(j+.5)*width/numSegs;let t=createVector(o,r),u=noise(frameCount*nd.fr+j*nd.x,frameCount*nd.fr+i*nd.y)*TWO_PI,d=p5.Vector.fromAngle(u).mult(n);e.push(p5.Vector.add(t,d))}curves.push(e)}}